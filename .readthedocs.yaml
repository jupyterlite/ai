# Read the Docs configuration file
# See https://docs.readthedocs.io/en/stable/config-file/v2.html for details

version: 2

build:
  os: ubuntu-24.04

  tools:
    python: "3.12"
    nodejs: "22"

  jobs:
    pre_build:
      - pip install uv
      - cd ./demo
      - uv python install
      - uv sync --locked --all-extras --dev
      - mkdir contents & cp README.md contents
      - uv run jupyter lite build

  commands:
    - pip install jupyter-book
    - npm run docs:build
    - mkdir -p $READTHEDOCS_OUTPUT/html/
    - cp -r _build/html/* $READTHEDOCS_OUTPUT/html/
    - mv ./demo/dist $READTHEDOCS_OUTPUT/html/lite
    - rm -rf _build
